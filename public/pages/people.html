<!DOCTYPE html>
<html>
<head>
	<title>People</title>
	<link href = "../assets/img/logo.png" rel="icon">
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<script defer src="https://use.fontawesome.com/releases/v5.0.10/js/all.js" integrity="sha384-slN8GvtUJGnv6ca26v8EzVaR9DC58QEwsIk9q1QXdCU8Yu8ck/tL/5szYlBbqmS+" crossorigin="anonymous"></script>
	<!-- Bootstrap and JQuery -->
	<script src="https://code.jquery.com/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet">

	<!--Fonts -->
	<link href="https://fonts.googleapis.com/css?family=Fredericka+the+Great" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Great+Vibes" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">

	<!--CUSTOM CSS and JS -->
	<link rel="stylesheet" type="text/css" href="../assets/css/style.css">
	

</head>

<body>
	<!------------------ HEADER ------------------>
	<header class="mb-4">
		<div class="container-fluid fixed-top" style="padding:0; background-color:#FEFAFA">
			<div class="col text-center" id="fadeout">
				<img class="img-fluid" src="../assets/img/logo2.png" style="max-height:120px" />
			</div>
			<nav class="navbar navbar-expand-lg" style="margin:0">
				<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" style="margin:auto">
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse text-center" id="navbarSupportedContent">
					<ul class="navbar-nav" style="margin:auto">
						<li class="nav-item"><a class="nav-link navigation-text" href="../index.html">Home</a></li>
						<li class="nav-item"><a class="nav-link navigation-text" href="whoweare.html">Who We Are</a></li>
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle navigation-text" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								Our offer
							</a>
							<div class="dropdown-menu text-center" aria-labelledby="navbarDropdown">
								<a class="dropdown-item navigation-text" href="services.html">Services</a>
								<a class="dropdown-item navigation-text" href="people.html">People</a>
								<a class="dropdown-item navigation-text" href="locations.html">Locations</a>
							</div>
						</li>
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle navigation-text" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								News &amp; Events
							</a>
							<div class="dropdown-menu text-center" aria-labelledby="navbarDropdown">
								<a class="dropdown-item navigation-text" href="#">News</a>
								<a class="dropdown-item navigation-text" href="#">Events</a>
							</div>
						</li>
						<li class="nav-item"> <a class="nav-link navigation-text" href="contactus.html">Contacts</a> </li>
					</ul>
				</div>
			</nav>
		</div>
	</header>
  	
	<!------------------ PRESENTATION IMAGE ------------------>
	<div class="container-fluid">
		<div  class="row">
			<div class="col-lg-8 col-xxs-12 m-auto text-center">
				<img src="../assets/img/presentation_img/people.jpg" class = "presentation-image" alt="The team">
				<div class="opaque_line_text">
					People
				</div>
			</div>
		</div>
    </div>

	<!------------------ DESCRIPTION CONTENT ------------------>
	<div class="row">
		<div class="col-lg-8 text-center m-auto">
			<p>
				We work with children who have moderate to severe learning and physical disabilities and sensory impairments â€“ typically autism, cerebral palsy and muscular dystrophy. We also encounter rare syndromes and conditions.Referral into the Children with Disabilities Social Work Team comes via the Safeguarding Referral Team (SRT)  and provides a Children and Families Assessment which may lead to the provision of an allocated Social Worker or Social Work Assistant who will draw up a Child In Need Plan to offer Focused and/or Enhanced Social Care Services. These services are coordinated in order to support Stoke on Trent's vision for children and young people as set out in the Children &amp; Young People's Plan is for them
			</p>

			<h2> Meet us! </h2>
			<p>Here you shall find everything you need to know about our past experiences and our areas of expertise. Find out if we work in the facility you're interested in!</p>
		</div>
	</div>

	<!------------ FILTERING BUTTONS  ------------>
	<div class="d-flex flex-row justify-content-center flex-wrap m-auto" id="buttonContainer" style="width: 65%">
		<button class="filter_button m-3 p-2" id="allBtn" onClick="showAll()">All People</button>
	</div>

	<!------------ DOCTOR CARDS  ------------>
	<div class="container mt-5" id="onClickReturn">
		<div class="d-flex flex-row flex-wrap justify-content-around" id="card_container">
			<!--filled with cards-->
		</div>
	</div>

	<!------------------ FOOTER ------------------>

	<footer>
		<div class="footer_content">
			<div class="container-fluid">
				<div class="row">
				    <div class="col-md-6 col-xs-10 d-flex flex-column flex-md-row text-center align-items-center nav-itemfooter mb-3" >
                        <a style="color: white; padding-left: 10px; padding-right: 10px" href="../index.html">Home</a>

                        <a style="color: white; padding-left: 10px; padding-right: 10px" href="#">Privacy</a>

                        <a style="color: white; padding-left: 10px; padding-right: 10px" href="#">Volunteer</a>

                        <a style="color: white; padding-left: 10px; padding-right: 10px" href="#">FAQ</a>

                        <a style="color: white; border-right: none; padding-left: 10px; padding-right: 10px" href="#">Help Us!</a>
                    </div>
				<div class="col-md-4 col-xs-10 mb-3" >
					<div class ="social">
						<div class="a2a_kit a2a_kit_size_32 a2a_default_style d-flex justify-content-center" style="padding-top: 10px">
							 <a class="a2a_button_facebook" href="https://www.facebook.com"></a>
							 <a class="a2a_button_twitter" href="https://www.twitter.com" style="margin-left: 10px"></a>
							 <a class="a2a_button_google_plus" href="https://www.plus.google.com" style="margin-left: 10px"></a>
							 <a class="a2a_button_email" style="margin-left: 10px"></a>
						</div>
						<script async src="https://static.addtoany.com/menu/page.js"></script>
					</div>
				</div>
				<div class="col-md-2 col-xs-10">
					<button href="#" type="button" class="btn donate-btn d-block mx-auto mb-3">
						donate
					</button>
				</div>
				</div>
			</div>
		</div>
	</footer>
	
	
	<!---------------------------------------------------->
	<!------------------ DYNAMIC SCRIPT ------------------>
	<!---------------------------------------------------->
	
	<script src="../assets/js/script.js"></script>
	<script type="text/javascript">
		jQuery(document).ready(function() {
			
			var serviceId = [];
			var serviceNames = [];
			
			fetch('/people')
				.then(function(response) {
					return response.json();
				})
				.then(function(data) {
					data.map(addDoctorCard);
					return data;
				})
				.then(function(data) {
					data.map(updateServiceList);
				})
				.then(addFilterButton);
				
			
			function addDoctorCard(doctor){
				$('#card_container').append(`
					<div class="doctor-card m-3 text-center">
						<p class="sr-only">${doctor.servicesId}</p>
						<a href="person.html?id=${doctor.id}">
							<div class="card-link">
								<div class="card-img-container">
									<img class="img-fluid card-img" src="${doctor.picture}" alt="doctor_image">
									<div class="lens_img"></div>
								</div>
								<h3 class="mt-2">${doctor.name} ${doctor.surname}</h3>
							</div>
						</a>
						<a class="btn d-md-none btn-sm btn-outline-secondary float-right mb-2" href="person.html?id=${doctor.id}">See More...</a>
					</div>
				`);
			};
			
			
			function updateServiceList(doctor){
				servArr = doctor.servicesId.split(",");
				servArr.forEach(function(elem) {
					if($.inArray(elem, serviceId) == -1)
						serviceId.push(elem);
				});
			};
			
			
			function addFilterButton(){
				serviceId.sort();
				serviceId.forEach(function(elem) {
					$('#buttonContainer').append(`
						<button class="filter_button m-3 p-2" id="serv${elem}" onClick="filterCards(this.id)">service${elem}</button>
					`);
				});
			};
			
			
			/*---------------*/
			
			
			
		});
		
		/*---------------*/
		
		function filterCards(btnName){
			var cards = $('#card_container').children();
			cards.hide();
			filteredCards = cards.filter(function (a) {
				var src_text = $(this).find('p').text();
				var locs = src_text.split(',');
				return $.inArray(btnName.replace('serv', ''), locs) > -1;
			});
			filteredCards.show();
			scrollOnClick();
		};
		
		function showAll(){
			var cards = $('#card_container').children();
			console.log(cards);
			cards.show();
			scrollOnClick();
		};
		
		function scrollOnClick(){
			$('html, body').animate({
				scrollTop: ($('#onClickReturn').offset().top - 250)
			}, 500);
		};
		
	</script>
	
	
</body>
</html>
